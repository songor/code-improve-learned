# 代码精进之路

### 开篇词 | 你写的每一行代码，都是你的名片

每一行代码，都体现着程序员的修为，思考问题的深度，甚至是处理问题的习惯和态度。

作为一名软件工程师，我们该怎么快速成长，并且保持长久的竞争力？

解决这个问题的终极方法，只有一个，那就是**持续地交付优秀的结果**。

### 01 | 从条件运算符说起，反思什么是好代码

坚持使用最直观的编码方式，而不是追求代码简短，真的可以避免很多不必要的错误。

关于优秀代码的特点，我想用**“经济”**这一个词语来表达。这里的“经济”，指的是使用较少的人力、物力、财力、时间、空间来获取较大的成果或收益。或者简单地说，投入少、收益大、投资回报高。

该怎么理解“经济”呢？这需要我们把代码放到软件的整个生命周期里来考察。

### 02 | 把错误关在笼子里的五道关卡

```c
    if ((error = doSomething()) != 0)
        goto fail;         
        goto fail;    
    if ((error= doMore()) != 0)        
        goto fail;
fail:    
    return error;
```

第一道关：程序员

提高程序员的修养，是一个永不过时的课题。从别人的失败和自己的失败中学习、积累、提高，是一个程序员成长的必修课。

首先，他应该正确使用缩进。其次，他应该使用大括号。

优秀的代码源于我们对细节的热情和执着。

第二道关：编译器

对于编译器的警告，我们一定要非常警觉。能消除掉所有的警告，你就应该消除掉所有的警告。就算实在没有办法消除掉编译警告，那你也一定要搞清楚警告产生的原因，并确认编译警告不会产生任何后续问题。

第三道关：回归测试

一般地，软件测试会尽可能地覆盖关键逻辑和负面清单，以确保关键功能能够正确执行，关键错误能够有效处理。

另外，这些测试代码还有一个关键用途就是做回归测试。如果有代码变更，我们可以用回归测试来检查代码变更有没有使代码变得更坏。

第四道关：代码评审

代码评审是一个有效的在软件研发过程中抵御人类缺陷的制度。通过更多的眼睛检查软件代码，被忽视的错误更容易被逮住，更好的设计和实现更容易浮现出来。

第五道关：代码分析

静态代码分析（Static Code Analysis）是通过对源代码的检查来发现潜在问题的一种软件质量保障方式。

代码覆盖率（Code Coverage）是一个反映测试覆盖程度的指标。它不仅仅量化测试的指标，也是一个检测代码缺陷的好工具。

**代码制造的流水线**

编写优秀的代码，不能仅仅依靠一个人的战斗。代码的优秀级别，依赖于每个关卡的优秀级别。高质量的代码，依赖于高质量的流水线。每道关卡都应该给程序员提供积极的反馈，这些反馈，在保障代码质量的同时，也能帮助程序员快速学习和成长。

### 03 | 优秀程序员的六个关键特质

**掌握一门编程语言**

对于编程语言，我们了解得越多，熟知的招式就越多，可选择的范围就越大，我们就有更多的活动空间和解决问题的办法。

**解决现实的问题**

只有理解了问题，看到了解决问题的价值，我们才能够真正解决好问题，并且从中获得满满的成就感。我们一定要记得，程序员的存在不是为了写代码，而是为了解决现实问题，实现现实价值。

如果说花样的工具是外家功夫，思维能力和行为能力可以算是内功。

优秀的程序员，是一个内外双修的程序员。如果一个程序员可以熟练使用工具，有清晰的解决问题思路，能明晰地传达产品价值，那么他编写代码就不存在什么巨大的困难了。

**发现关键的问题**

优秀的程序员，能够发现一门编程语言的缺陷，一个顺手工具的局限。所以，他知道该怎么选择最合适的工具，该怎么避免不必要的麻烦。

优秀的程序员，能够发现解决方案背后的妥协和风险。所以，他可以预设风险防范措施，设置软件的适用边界。

优秀的程序员，能够敏锐地观察到产品的关键问题，或者客户未被满足的需求。所以，他可以推动产品持续地进步和演化。

能够发现关键的问题，意味着我们可以从一个被动做事情的程序员，升级为一个主动找事情的程序员。

能够发现关键的问题，往往需要我们对一个领域有很深入的研究和深厚的积累，并且对新鲜事物保持充分的好奇心和求知欲。

**沉静的前行者**

优秀的程序员，一定是懂得妥协，懂得选择，一步一步把事情沉静地朝前推动的人。

对完美的过分追求，可能是一个代价高昂，收获甚小的行为。

而且，完美也可能意味着不承认缺陷，不承认未知。这样，我们可能在心理上就不会对代码的未知风险做出充分的预判，留出足够的安全缓冲空间。

**可以依赖的伙伴**

优秀的程序员，知道团队合作的重要性，是一个优秀的团队成员。

如果说，编程语言、花样工具、逻辑思维、解决问题这些“硬技能”可以决定我们的起点的话，影响力、人际关系这些“软技能”通常影响着我们可以到达的高度。

**时间管理者**

坚持把时间用在对的地方，用在价值更大的地方。

要做只有你才能做的事情。

要坚持做需要做的事情。不需要的、不紧急的、价值不大的我们可以暂时搁置起来。一个人能做的事情是有限的，能把最重要的事情最好，就已经很了不起了。

